

.row
  .col-md-9
    .container{ id: "chart-#{@market.id}", style: 'height: 400px; width: 100%;' }

    .row
      .col-md-6= render partial: 'orders_block', locals: { title: 'Sell Orders', market: @market, orders: @asks }
      .col-md-6= render partial: 'orders_block', locals: { title: 'Buy Orders', market: @market, orders: @bids }

  .col-md-3
    .panel.panel-default.exchange-markets-list
      .panel-heading
        %h3.panel-title= "#{@exchange.name} Markets"

      .list-group
        - @exchange.exchange_markets.each do |exchange_market|
          = link_to exchange_path(id: @exchange, market: exchange_market.market), { class: 'list-group-item' } do
            .row
              .col-md-6= exchange_market.market.name
              .col-md-6= exchange_market.current_value.round(4)


:javascript
  google.load("visualization", "1", {packages:["corechart"]});
  google.setOnLoadCallback(drawChart);
  function drawChart() {
    var jsonData = $.ajax({
              url: "/exchanges/chart-data/#{@exchange.id}?market=#{@market.id}",
              dataType:"json",
              async: false
              }).responseText;

    // Create our data table out of JSON data loaded from server.
    var data = new google.visualization.DataTable(jsonData);

    var options = {
      title: 'Average #{@market.source.name} Price in #{@market.target.name}'
    };

    var chart = new google.visualization.LineChart(document.getElementById('chart-#{@market.id}'));
    chart.draw(data, options);
  }